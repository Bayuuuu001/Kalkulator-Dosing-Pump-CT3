<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Kalkulator Kalibrasi Pompa</title>
<style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { color: #333; }
    label { display: block; margin-top: 10px; }
    input, select, button { padding: 8px; margin-top: 5px; width: 300px; }
    .result { margin-top: 20px; font-weight: bold; }
    button { width: 120px; }
</style>
</head>
<body>

<h1>Kalkulator Kalibrasi Pompa</h1>

<label for="senyawa">Pilih Senyawa:</label>
<select id="senyawa">
    <option value="ZP 35">ZP 35</option>
    <option value="Hypo">Hypo</option>
    <option value="NaOH">NaOH</option>
</select>

<label for="flow_ml">Flow (ml) dari hasil kalibrasi:</label>
<input type="number" id="flow_ml" placeholder="Misal 100" step="0.01">

<div style="margin-top:15px;">
    <button onclick="startTimer()">Start</button>
    <button onclick="stopTimer()">Stop</button>
</div>

<div class="result" id="timerDisplay">Waktu: 0 detik</div>
<div class="result" id="hasil"></div>

<script>
let startTime = 0;
let running = false;
let timerInterval;

function startTimer() {
    if (running) return;
    running = true;
    startTime = Date.now();
    timerInterval = setInterval(updateTimer, 100);
}

function stopTimer() {
    if (!running) return;
    running = false;
    clearInterval(timerInterval);
    let elapsedSeconds = (Date.now() - startTime) / 1000;
    document.getElementById('timerDisplay').innerText = "Waktu: " + elapsedSeconds.toFixed(2) + " detik";
    hitung(elapsedSeconds);
}

function updateTimer() {
    let elapsedSeconds = (Date.now() - startTime) / 1000;
    document.getElementById('timerDisplay').innerText = "Waktu: " + elapsedSeconds.toFixed(2) + " detik";
}

function hitung(waktuDetik) {
    let flowMl = parseFloat(document.getElementById('flow_ml').value);
    if (isNaN(flowMl) || flowMl <= 0) {
        document.getElementById('hasil').innerText = "Masukkan flow (ml) yang benar!";
        return;
    }

    // Hitung LPH
    let LPH = (flowMl / 1000) / (waktuDetik / 3600);

    // Hitung dosis (ppm)
    let dosis = (LPH * 1000) / (24 * 87.1);

    document.getElementById('hasil').innerHTML = 
        "Senyawa: " + document.getElementById('senyawa').value + "<br>" +
        "LPH: " + LPH.toFixed(3) + " L/h<br>" +
        "Dosis: " + dosis.toFixed(3) + " ppm";
}
</script>

</body>
</html>
